<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인터랙티브 마케팅 캘린더</title>
    <script src="https://cdn-tailwindcss.vercel.app/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        :root {
            --naver-color: #03C75A;
            --facebook-color: #1877F2;
            --kakao-color: #FEE500;
            --instagram-color: #E4405F;
            --threads-color: #374151;
            --x-color: #000000;
            --youtube-color: #FF0000;
            --linkedin-color: #0A66C2; 
            --system-color: #64748b;
        }
        .platform-tag {
            padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;
            font-weight: 500; color: white; display: inline-block;
        }
        .platform-nb { background-color: var(--naver-color); }
        .platform-fb { background-color: var(--facebook-color); }
        .platform-kc { background-color: var(--kakao-color); color: #3B1E1E; }
        .platform-ig { background-color: var(--instagram-color); }
        .platform-th { background-color: var(--threads-color); }
        .platform-x { background-color: var(--x-color); }
        .platform-yt { background-color: var(--youtube-color); }
        .platform-nc { background-color: var(--naver-color); }
        .platform-li { background-color: var(--linkedin-color); }
        .platform-all { background-color: var(--system-color); }


        .category-tag {
            padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;
            font-weight: 700; color: white;
        }
        .category-b2b { background-color: #0ea5e9; } /* Bright Sky Blue */
        .category-b2c { background-color: #a855f7; } /* Purple */

        .day-column.today {
            transform: scale(1.03);
            box-shadow: 0 0 15px rgba(76, 29, 149, 0.2);
            border: 2px solid #6d28d9;
        }

        .progress-bar-bg {
            background-color: #e5e7eb; border-radius: 9999px;
            height: 1.5rem; overflow: hidden;
        }
        .progress-bar-fill {
            background-color: #4f46e5; transition: width 0.5s ease-in-out; text-align: center;
            color: white; font-weight: bold; display: flex; align-items: center; justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">인터랙티브 마케팅 캘린더</h1>
        </header>

        <div class="bg-white p-6 rounded-xl shadow-md mb-8 max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-bold text-gray-700">전체 진행률</h2>
                 <button id="reset-all-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition-colors">
                    전체 초기화
                </button>
            </div>
            <div class="progress-bar-bg">
                <div id="overall-progress-bar" class="progress-bar-fill" style="width: 0%;">0%</div>
            </div>
        </div>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6" id="calendar-grid">
            <!-- Day columns will be injected here by JavaScript -->
        </main>
        
        <div class="mt-12">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">정기 발행</h2>
            <div class="max-w-md mx-auto bg-white p-4 rounded-lg shadow-md space-y-2">
                 <div class="task-item flex items-center p-2 rounded-md transition-colors duration-200">
                    <input type="checkbox" id="monthly-kc-msg-1" class="h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 cursor-pointer mr-3">
                    <label for="monthly-kc-msg-1" class="flex-grow cursor-pointer">
                        <div class="flex items-center space-x-2">
                           <span class="category-tag category-b2c">B2C</span>
                           <span class="platform-tag platform-kc">KC</span>
                           <span>상품 메시지 발송 1</span>
                        </div>
                    </label>
                </div>
                <div class="task-item flex items-center p-2 rounded-md transition-colors duration-200">
                    <input type="checkbox" id="monthly-kc-msg-2" class="h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 cursor-pointer mr-3">
                    <label for="monthly-kc-msg-2" class="flex-grow cursor-pointer">
                        <div class="flex items-center space-x-2">
                           <span class="category-tag category-b2c">B2C</span>
                           <span class="platform-tag platform-kc">KC</span>
                           <span>상품 메시지 발송 2</span>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const calendarData = {
            "월요일": [
                { id: "mon-b2b-fb-sum", cat: "B2B", platform: "FB", task: "블로그 요약" },
                { id: "mon-b2b-ig-sum", cat: "B2B", platform: "IG", task: "블로그 요약" },
                { id: "mon-b2b-kc-sum", cat: "B2B", platform: "KC", task: "블로그 요약" },
                { id: "mon-b2b-li-sum", cat: "B2B", platform: "LI", task: "블로그 요약" },
                { id: "mon-b2b-nb-post", cat: "B2B", platform: "NB", task: "포스팅" },
                { id: "mon-b2b-th-sum", cat: "B2B", platform: "TH", task: "블로그 요약" },
                { id: "mon-b2c-ig-sched", cat: "B2C", platform: "IG", task: "일정표 카드 뉴스" },
                { id: "mon-b2c-th-sched", cat: "B2C", platform: "TH", task: "일정표 카드 뉴스" },
                { id: "mon-b2c-th-feed", cat: "B2C", platform: "TH", task: "피드" },
                { id: "mon-b2c-x-feed", cat: "B2C", platform: "X", task: "피드" }
            ],
            "화요일": [
                { id: "tue-b2b-fb-theme", cat: "B2B", platform: "FB", task: "추천 연수 테마 카드 뉴스" },
                { id: "tue-b2b-ig-theme", cat: "B2B", platform: "IG", task: "추천 연수 테마 카드 뉴스" },
                { id: "tue-b2b-li-theme", cat: "B2B", platform: "LI", task: "추천 연수 테마 카드 뉴스" },
                { id: "tue-b2b-th-theme", cat: "B2B", platform: "TH", task: "추천 연수 테마 카드 뉴스" },
                { id: "tue-b2c-fb-sum", cat: "B2C", platform: "FB", task: "블로그 요약" },
                { id: "tue-b2c-ig-sum", cat: "B2C", platform: "IG", task: "블로그 요약" },
                { id: "tue-b2c-kc-sum", cat: "B2C", platform: "KC", task: "블로그 요약" },
                { id: "tue-b2c-nb-post", cat: "B2C", platform: "NB", task: "포스팅" },
                { id: "tue-b2c-th-sum", cat: "B2C", platform: "TH", task: "블로그 요약" },
                { id: "tue-b2c-th-feed", cat: "B2C", platform: "TH", task: "피드" }
            ],
            "수요일": [
                { id: "wed-b2c-th-feed", cat: "B2C", platform: "TH", task: "피드" },
                { id: "wed-b2c-yt-edit", cat: "B2C", platform: "YT", task: "편집" }
            ],
            "목요일": [
                { id: "thu-b2b-fb-sum", cat: "B2B", platform: "FB", task: "블로그 요약" },
                { id: "thu-b2b-ig-sum", cat: "B2B", platform: "IG", task: "블로그 요약" },
                { id: "thu-b2b-kc-sum", cat: "B2B", platform: "KC", task: "블로그 요약" },
                { id: "thu-b2b-li-sum", cat: "B2B", platform: "LI", task: "블로그 요약" },
                { id: "thu-b2b-nb-post", cat: "B2B", platform: "NB", task: "포스팅" },
                { id: "thu-b2b-th-sum", cat: "B2B", platform: "TH", task: "블로그 요약" },
                { id: "thu-b2c-fb-reels", cat: "B2C", platform: "FB", task: "릴스" },
                { id: "thu-b2c-ig-reels", cat: "B2C", platform: "IG", task: "릴스" },
                { id: "thu-b2c-nc-reels", cat: "B2C", platform: "NC", task: "릴스" },
                { id: "thu-b2c-th-reels", cat: "B2C", platform: "TH", task: "릴스" },
                { id: "thu-b2c-th-feed", cat: "B2C", platform: "TH", task: "피드" },
                { id: "thu-b2c-x-feed", cat: "B2C", platform: "X", task: "피드" }
            ],
            "금요일": [
                { id: "fri-b2b-fb-reels", cat: "B2B", platform: "FB", task: "릴스" },
                { id: "fri-b2b-ig-reels", cat: "B2B", platform: "IG", task: "릴스" },
                { id: "fri-b2b-li-reels", cat: "B2B", platform: "LI", task: "릴스" },
                { id: "fri-b2b-nc-reels", cat: "B2B", platform: "NC", task: "릴스" },
                { id: "fri-b2b-th-reels", cat: "B2B", platform: "TH", task: "릴스" },
                { id: "fri-b2c-fb-sum", cat: "B2C", platform: "FB", task: "블로그 요약" },
                { id: "fri-b2c-ig-sum-fri", cat: "B2C", platform: "IG", task: "블로그 요약" },
                { id: "fri-b2c-kc-sum", cat: "B2C", platform: "KC", task: "블로그 요약" },
                { id: "fri-b2c-nb-post", cat: "B2C", platform: "NB", task: "포스팅" },
                { id: "fri-b2c-th-sum-fri", cat: "B2C", platform: "TH", task: "블로그 요약" },
                { id: "fri-b2c-th-feed", cat: "B2C", platform: "TH", task: "피드" }
            ],
            "일요일": [
                 { id: "sun-b2c-yt-upload", cat: "B2C", platform: "YT", task: "업로드" },
                 { id: "sun-b2b-unfinished", cat: "B2B", platform: "ALL", task: "미완료 항목" },
                 { id: "sun-b2c-unfinished", cat: "B2C", platform: "ALL", task: "미완료 항목" }
            ]
        };

        const platformMap = {
            NB: 'NB', NC: 'NC', FB: 'FB', IG: 'IG', TH: 'TH', KC: 'KC', LI: 'LI', X: 'X', YT: 'YT', ALL: 'ALL'
        };

        const grid = document.getElementById('calendar-grid');
        const today = new Date().getDay(); // 0=일, 1=월, ..., 6=토

        Object.keys(calendarData).forEach((day, index) => {
            const dayNameMap = {"월요일":1, "화요일":2, "수요일":3, "목요일":4, "금요일":5, "토요일":6, "일요일":0};
            const dayIndex = dayNameMap[day];

            const column = document.createElement('div');
            column.className = 'day-column bg-white p-4 rounded-lg shadow-md flex flex-col space-y-3 transition-all duration-300';
            if (dayIndex === today) {
                column.classList.add('today');
            }

            const header = document.createElement('h2');
            header.className = 'text-xl font-bold text-center text-gray-700 border-b pb-2 mb-2 flex justify-between items-center';
            header.innerHTML = `<span>${day}</span> <button data-day="${day}" class="reset-day text-xs font-normal text-gray-500 hover:text-red-500 transition-colors">전체 해제</button>`;
            column.appendChild(header);

            const tasksContainer = document.createElement('div');
            tasksContainer.className = 'flex-grow space-y-2';

            calendarData[day].forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = 'task-item flex items-center p-2 rounded-md transition-colors duration-200';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = task.id;
                checkbox.className = 'weekly-task h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 cursor-pointer mr-3';
                
                const label = document.createElement('label');
                label.htmlFor = task.id;
                label.className = 'flex-grow cursor-pointer';
                label.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span class="category-tag ${task.cat === 'B2B' ? 'category-b2b' : 'category-b2c'}">${task.cat}</span>
                        <span class="platform-tag platform-${platformMap[task.platform]?.toLowerCase()}">${platformMap[task.platform]}</span>
                        <span>${task.task}</span>
                    </div>
                `;

                taskItem.appendChild(checkbox);
                taskItem.appendChild(label);
                tasksContainer.appendChild(taskItem);
            });

            column.appendChild(tasksContainer);
            grid.appendChild(column);
        });

        // --- Progress Bar and Reset Logic ---
        const progressBar = document.getElementById('overall-progress-bar');
        const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
        const weeklyCheckboxes = document.querySelectorAll('.weekly-task');
        const resetAllButton = document.getElementById('reset-all-btn');

        const updateOverallProgress = () => {
            const totalTasks = weeklyCheckboxes.length;
            const completedTasks = Array.from(weeklyCheckboxes).filter(cb => cb.checked).length;
            const percentage = totalTasks === 0 ? 0 : Math.round((completedTasks / totalTasks) * 100);
            
            progressBar.style.width = `${percentage}%`;
            progressBar.textContent = `${percentage}%`;
        };

        allCheckboxes.forEach(checkbox => {
            if (localStorage.getItem(checkbox.id) === 'true') {
                checkbox.checked = true;
                checkbox.closest('.task-item').classList.add('bg-gray-200', 'line-through', 'text-gray-500');
            }

            checkbox.addEventListener('change', (e) => {
                localStorage.setItem(e.target.id, e.target.checked);
                 if (e.target.checked) {
                    e.target.closest('.task-item').classList.add('bg-gray-200', 'line-through', 'text-gray-500');
                } else {
                    e.target.closest('.task-item').classList.remove('bg-gray-200', 'line-through', 'text-gray-500');
                }
                if(e.target.classList.contains('weekly-task')){
                    updateOverallProgress();
                }
            });
        });
        
        document.querySelectorAll('.reset-day').forEach(button => {
            button.addEventListener('click', (e) => {
                const dayToReset = e.target.dataset.day;
                if (confirm(`${dayToReset}의 모든 항목을 해제하시겠습니까?`)) {
                    calendarData[dayToReset].forEach(task => {
                        const checkbox = document.getElementById(task.id);
                        if (checkbox) {
                            checkbox.checked = false;
                            localStorage.setItem(task.id, 'false');
                            checkbox.closest('.task-item').classList.remove('bg-gray-200', 'line-through', 'text-gray-500');
                        }
                    });
                    updateOverallProgress();
                }
            });
        });

        resetAllButton.addEventListener('click', () => {
             if (confirm('모든 주간 기록을 초기화하시겠습니까? (정기 발행 제외)')) {
                weeklyCheckboxes.forEach(checkbox => {
                     checkbox.checked = false;
                     localStorage.setItem(checkbox.id, 'false');
                     checkbox.closest('.task-item').classList.remove('bg-gray-200', 'line-through', 'text-gray-500');
                });
                updateOverallProgress();
            }
        });
        
        // Initial load
        updateOverallProgress();
    });
    </script>
</body>
</html>
